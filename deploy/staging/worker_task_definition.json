{
  "family": "somleng-staging-worker",
  "networkMode": "awsvpc",
  "cpu": "512",
  "memory": "1024",
  "executionRoleArn": "arn:aws:iam::324279636507:role/somleng-staging-ecsTaskExecutionRole",
  "taskRoleArn": "arn:aws:iam::324279636507:role/somleng-staging-ecs-task-role",
  "requiresCompatibilities": ["FARGATE"],
  "containerDefinitions": [{"command":["bundle","exec","shoryuken","-R","-C","config/shoryuken.yml"],"cpu":0,"environment":[{"name":"AWS_DEFAULT_REGION","value":"ap-southeast-1"},{"name":"AWS_SES_REGION","value":"us-east-1"},{"name":"AWS_SQS_DEFAULT_QUEUE_NAME","value":"somleng-staging-default"},{"name":"AWS_SQS_HIGH_PRIORITY_QUEUE_NAME","value":"somleng-staging-high-priority"},{"name":"AWS_SQS_LOW_PRIORITY_QUEUE_NAME","value":"somleng-staging-low-priority"},{"name":"AWS_SQS_SCHEDULER_QUEUE_NAME","value":"somleng-staging-scheduler"},{"name":"DATABASE_HOST","value":"somlengv2.cluster-clrslmbm6627.ap-southeast-1.rds.amazonaws.com"},{"name":"DATABASE_NAME","value":"somleng_staging"},{"name":"DATABASE_PORT","value":"5432"},{"name":"DATABASE_USERNAME","value":"somleng"},{"name":"DB_POOL","value":"48"},{"name":"INBOUND_SIP_TRUNKS_SECURITY_GROUP_ID","value":"sg-0bf7dfe6380356bdb"},{"name":"RACK_ENV","value":"staging"},{"name":"RAILS_ENV","value":"staging"},{"name":"RAILS_LOG_TO_STDOUT","value":"true"},{"name":"RAW_RECORDINGS_BUCKET","value":"raw-recordings-staging.somleng.org"},{"name":"UPLOADS_BUCKET","value":"uploads-staging.somleng.org"}],"essential":true,"healthCheck":{"command":["CMD-SHELL","wget --server-response --spider --quiet http://localhost:3000/health_checks 2>&1 | grep '200 OK' > /dev/null"],"interval":10,"retries":10,"timeout":5},"image":"public.ecr.aws/somleng/somleng:latest","logConfiguration":{"logDriver":"awslogs","options":{"awslogs-group":"somleng-staging-worker","awslogs-region":"ap-southeast-1","awslogs-stream-prefix":"staging"}},"mountPoints":[],"name":"worker","portMappings":[],"secrets":[{"name":"RAILS_MASTER_KEY","valueFrom":"arn:aws:ssm:ap-southeast-1:324279636507:parameter/somleng.staging.rails_master_key"},{"name":"DATABASE_PASSWORD","valueFrom":"arn:aws:ssm:ap-southeast-1:324279636507:parameter/somleng.db_master_password"},{"name":"SERVICES_PASSWORD","valueFrom":"arn:aws:ssm:ap-southeast-1:324279636507:parameter/somleng.staging.services_password"}],"startTimeout":120,"volumesFrom":[]}]
}
